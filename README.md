# Документация

Никогда не писал доки, надеюсь будет понятно. 

Проект создан при помощи [Create React App](https://github.com/facebook/create-react-app).


## Структура Проекта
```
В проекте используется модульный подход - каждая отдельная страница или функциональность - отдельно взятый модуль со своим api, хуками, компонентами и прочим
|- public                   - Все интерактивные файлы (фото, шрифты)
|  |- images                - Эта папка небольшое легаси, позже перенесу в leadbro
|  |- leadbro               - Именно тут будем хранить все файлы .jpg, ,png
|- src                      - Корневая директория
|  |- components            - Компоненты, которые нельзя вынести из системы(высокоуровневые компоненты), но при этом дубрирующиеся в нескольких местах
|  |- hooks                 - Хуки, которые используются в проекте повсеместно(повторяются)
|  |- pages                 - Как раз таки модули приложения
|  |  |-components          - Компоненты конкретного модуля, сделано для низкой связности и удобства
|  |  |-hooks               - Хуки конкретного модуля, могут быть использованы в других модулях, например для получения клинетов
|  |  |-stores              - Хранилище, хранящее состояние в данном модуле
|  |  |-.api                - апи модуля, используется через hook use...Api, для возможности взаимодейтсвия со стором
|  |  |-.mocks              - моки
|  |  |-.types              - типы для статусов, селекторов и прочего
|  |  |-WeekBusiness.jsx           - Стартовая точка модуля, используется в папке render для отображения. В ней пытаемся работать с апи (бывают исключения)
|  |- providers             - Провайдеры и контексты, пока нужно просто для добавления контекста хранилища
|  |- routes                - Рендер модулей, работаем с переменной paths и routes, оборачиваем компонент в <Pages><Pages/> Для отображения лейаута приложения
|  |- shared                - Папка с низкоуровневыми компонентами(почти все можно вынести из приложения), также тут находится интерфейс работы с апи http.js
|  |- styles                - Стили из пака, на котором основано приложение, почти во всех модулях используется helpers.sass
|  |- utils                 - Функции для трансформирований, форматирований, проверки типов, работы анимации итп 

```
## MobX

Для ознакомления с концепцией [Mobx[1]](https://mobx.js.org/README.html) [Mobx[2]](https://habr.com/ru/articles/282578/)

По сути, 95% времени создавать сторы мы будем просто копируя уже созданные ранее, так как используются внутренние функции из **utils**

Вкратце о концепции - **MobX** предоставляет функционал **изменяемого глобального состояния**, то есть состояние компонент выносится в **отдельное хранилище(store)**, что дает нам полный контроль над тем, где какое состояние использовать
Например, пользователя, который зашел в приложение мы получаем сразу при входе, и использоваться он может в любом компоненте. Чтобы **напрямую не вызывать** хранилище используются хуки по типу **useUser()**

## React-Dom
Не знаю, доводилось ли работать с домом реакта, но тут все +- просто
У нас есть папка routes, в ней ведется рендеринг компонент. Там же мы настраиваем пути, переходя по которым React-Dom соотносит компоненты и url
Также стоит упомянуть тег [Link](https://reactrouter.com/en/main/components/link), благодоря нему идет маршрутизация
## Framer-Motion
Также в проекте используется [framer-motion](https://www.framer.com/motion/transition/)
Это больше для ознакомления, основные переходы уже написаны

# Компоненты системы (shared)

## Table
Наверное, самый сложный компонент, включает в себя много различной логикия.
Вообще, компонент базируется на react-table - headless таблице, стили к которой пишешь самостоятельно.
 - columns - колонки, посмотреть как они создаются можно в **ClientsTable** или **ServiceTable**
 - data    - дата из хранилища **MobX**
 - title   - думаю понятно
 - headerActions - в зависимости от типа таблицы могут быть разные экшены, поэтому я решил просто добавить компонент в котором эти экшены все будут собраны, а в **headerActions** мы просто отмечаем какие нам надо, какие нет, меняем функциональность клика итп
Это база, остально можно понять по примерам или из контектса.

## Badge
Компонент отображения статуса, он просто рендерит статус, сами настройки идут в компонентах модуля (например **ServiceBadge**)

## Input
Инпут в системе представлен **TextInput'ом**, есть еще и другие надстройки над ним, но они ситуатины (например, когда инпут представлен как макете страницы клиентов - используется **CardInput**)

## Modal
Компонент основного модального окна представлен компонентов **Modal**, саму модалку мы пишем в компонентах модуля (как в **EditModal**)

## http 
Также наверное стоит обратить внимание на файл http.js, в нем собрана логика по работе с http клиентом [Axios](https://axios-http.com/ru/docs/intro)
Там важные функции - это **handleHttpResponse** и  **handleHttpError**. Посмотреть как это реализовано можно в любом файле .api
Нужно это для стандартизации ответов с бекенда (их пока нет)

# Моки
Так как ответтов с бекенда пока нет, мы используем моки - plain объекты в файлах *Модуль*.mocks.js. Стараемся задавать каждому вложенному, да и вобще любому объекту **id**, это нужно для корректного работы сторов


## Скрипты

Самый базовый и важный скрипт

### `npm run start`

Запускает режим разработки.\
Открывает [http://localhost:3000](http://localhost:3000) для отображения в бразуере.

Буду добавлять доку по мере появления чего-то нового, по вопросам в тг
